# CSR Component Library

Description goes here

## Configurations

### Infrastructure setup
Some infrastructures have been implemented into the CSR Component Library, and the structure is designed to give easy access to the consumer of this library to easily manage built in functionalities generated by the components. 

Currently the following components are included as part of the CSR Component Library infrastructure and requires setup:
1. Logging - CsrComponentLogger (csr-component-logger.ts)
2. Dynamic Scripts Loader - CsrComponentScriptLoaderService (csr-component-script-loader-service.ts)

#### Common Configuration 
1. tsconfig.json
Add "baseUrl" and "paths" in your project's root tsconfig.json file.
The purpose of this is to configure the paths of the compilers to find the predefined location of your app's app.module.ts (in system-message.ts), so that it can locate the reference for the exported logger in step 3 above. For more information on how this works, refer to https://www.typescriptlang.org/tsconfig#paths.
```json
{
    ... //omitted for clarity
    "compilerOptions": {
    "baseUrl": ".", //this is required when "paths" is defined in "compilerOptions"
    "paths": {
      "appModuleDir/*": ["src/app/*"] //this must be "appModuleDir/*" as predefined in system-message.ts
    },
    ... //omitted for clarity
}
```

#### Logging - CsrComponentLogger (csr-component-logger.ts)
To gain access to the log contents, you can follow the instructions below to create your own instance of a logger.

1. Create your own logger that implements the interface CsrComponentLogger and implements the method "write(message: string)"
```typescript
@Injectable()
export class MyComponentLogger implements CsrComponentLogger {
    write(messageType: SystemMessageType, message: string): void {
        console.log("[" + this.constructor.name + "]" + message);
    }
}
```
2. Add the MyComponentLogger implementation as provider in app.module.ts
```typescript
@NgModule({
  imports: [
    ... //omitted for clarity
  ],
  providers: [
    MyComponentLogger,
     ... //omitted for clarity
  ],
  declarations: [
    ... //omitted for clarity
  ],
  ... //omitted for clarity
})
```

3. Define, export and set MyComponentLogger in app.module.ts
Add below before the @NgModule declaration:
```typescript
export let componentLogger: CsrComponentLogger;
```
Inject and assign logger:
```typescript
export class AppModule {
  constructor(
    ... //omitted for clarity
    private myComponentLogger: CsrConnectComponentLogger) { //MyComponentLogger will be injected here
    componentLogger = this.myComponentLogger;
  }
  ... //omitted for clarity
}
```

#### Dynamic Scripts Loader - CsrComponentScriptLoaderService (csr-component-script-loader-service.ts)
This service allows scripts to be dynamically injected when components requires the defined scripts from the components within the CSR Component Library.
The only step required to have this configured is to add the service to your applications providers.

1. Add the CsrComponentScriptLoaderService implementation as provider in app.module.ts
```typescript
import { CsrComponentScriptLoaderService } from '<path-to-csr-component-directory>/infrastructure/csr-component-script-loader-service';

@NgModule({
  imports: [
    ... //omitted for clarity
  ],
  providers: [
    CsrComponentScriptLoaderService,
     ... //omitted for clarity
  ],
  declarations: [
    ... //omitted for clarity
  ],
  ... //omitted for clarity
})
```